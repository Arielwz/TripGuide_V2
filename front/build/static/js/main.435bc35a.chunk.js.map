{"version":3,"sources":["Components/Trip.js","Components/ShowSaved.js","Components/Show.js","Components/ShowList.js","Pages/HomePage.js","Pages/UploadPage.js","Pages/LoginPage.js","Pages/RegistPage.js","Components/SearchComponent.js","Components/NavigationComponent.js","App.js","index.js"],"names":["arr","add","t","array","push","localStorage","setItem","JSON","stringify","Set","parse","getItem","Trip","trip","className","src","img","alt","name","location","content","tag","credit","onClick","ShowSaved","arr1","map","Show","props","trips","id","selectedTripObj","ShowList","useState","setTrips","count","setCount","page","setPage","selectedTrip","setSelectedTrip","useMemo","find","unique","useEffect","fetchTrips","a","fetch","searchKey","response","json","res","success","fetchCount","resRaw","r","htmlFor","onChange","e","target","value","layout","total","pageSize","onCurrentChange","HomePage","UploadPage","tripInfo","setTripInfo","errorText","setErrorText","style","fontSize","role","marginBottom","onSubmit","ev","preventDefault","formData","FormData","Object","entries","forEach","key","append","method","credentials","body","history","message","type","aria-label","rows","cols","image","files","withRouter","userInfo","setUserInfo","username","password","headers","onLogin","to","RegistPage","setSearchKey","placeholder","onSearch","useLocation","console","log","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","pathname","aria-current","marginLeft","hasLogin","onLogout","replace","App","setLogin","checkLogin","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.435bc35a.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\r\n\r\nconst arr = [];\r\n\r\nfunction add(t) {\r\n  arr.push(t);\r\n  localStorage.setItem(\"saveTrip\", JSON.stringify( unique(arr)));\r\n  JSON.parse(localStorage.getItem(\"saveTrip\"));\r\n}\r\n\r\n\r\nfunction unique(array) {\r\n  return [...new Set(array)]\r\n}\r\n\r\nfunction Trip({ trip }) {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card\">\r\n        <img className=\"card-img-top\" src={trip.img} alt=\"trip\" />\r\n        <p className=\"card-title\">{trip.name}</p>\r\n        <p>Location:{trip.location}</p>\r\n        <p>{trip.content}</p>\r\n        <p>Tags:{trip.tag}</p>\r\n        <p className=\"card-text\">\r\n          Image by {trip.credit}\r\n        </p>\r\n      </div>\r\n      <button className=\"btn btn-primary\" onClick={() => add(trip)}>\r\n        save\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nTrip.propTypes = {\r\n  trip: PropTypes.object,\r\n};\r\n\r\nexport default Trip;\r\n","import Trip from \"./Trip\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ShowSaved() {\r\n  let arr1 = JSON.parse(localStorage.getItem(\"saveTrip\"));\r\n\r\n  return arr1 ? (\r\n    <div>\r\n      {arr1.map((trip) => (\r\n        <Trip trip={trip} />\r\n      ))}\r\n    </div>\r\n  ) : (\r\n    \"Empty save.\"\r\n  );\r\n}\r\n\r\nShowSaved.propTypes = {\r\n  trip: PropTypes.object,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Trip from \"./Trip\";\r\n\r\nfunction Show(props) {\r\n  return props.trips ? (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-6 col-sm\" id=\"card-display\">\r\n          {props.selectedTripObj ? (\r\n            <Trip trip={props.selectedTripObj} key={props.trip} />\r\n          ) : (\r\n            props.trips.map((t) => (\r\n              <div className=\"card-deck\">\r\n                <div className=\"card-body\">\r\n                  <Trip key={t.id} trip={t} />\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nShow.propTypes = {\r\n  props: PropTypes.array,\r\n};\r\n\r\nexport default Show;\r\n","import Show from \"./Show\";\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Pagination } from \"element-react\";\r\nimport \"element-theme-default\";\r\n\r\nconst ShowList = function ShowList(props) {\r\n  const [trips, setTrips] = useState([]);\r\n  const [count, setCount] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const [selectedTrip, setSelectedTrip] = useState(\"\");\r\n\r\n  const selectedTripObj = useMemo(\r\n    () => trips?.find((t) => t.tag === selectedTrip),\r\n    [selectedTrip, trips]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const fetchTrips = async () => {\r\n      const response = await fetch(\r\n        `/getTrips?searchKey=${props.searchKey}&page=${page}`\r\n      );\r\n      const res = await response.json();\r\n      if (res && res.success) {\r\n        setTrips(res.trips);\r\n      }\r\n    };\r\n\r\n\r\n    const fetchCount = async () => {\r\n      const resRaw = await fetch(\r\n        `./countRecords?searchKey=${props.searchKey}`\r\n      );\r\n      const r = await resRaw.json();\r\n      if (r) {\r\n        setCount(r.a);\r\n      }\r\n    };\r\n    fetchTrips();\r\n    fetchCount();\r\n\r\n\r\n  }, [props.searchKey, page]);\r\n\r\n\r\n  function unique(array) {\r\n    return [...new Set(array)]\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Find your favorite trips!</h1>\r\n      <label htmlFor=\"trips-select\">Filter by tag:</label>\r\n      {\r\n        <select\r\n          name=\"trips\"\r\n          id=\"trips-select\"\r\n          onChange={(e) => {\r\n            setSelectedTrip(e.target.value);\r\n          }}\r\n        >\r\n\r\n          <option value=\"all\">All</option>\r\n          {unique(trips)?.map((trip) => (\r\n            <option key={trip} value={trip.tag}>\r\n              {unique(trip.tag)}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      }\r\n\r\n      <Show trips={trips} selectedTripObj={selectedTripObj} />\r\n\r\n      <div className=\"first\">\r\n        <div className=\"block\">\r\n          <Pagination\r\n            layout=\"prev, pager, next\"\r\n            total={count}\r\n            pageSize={6}\r\n            onCurrentChange={(e) => setPage(e)}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nShowList.propTypes = {\r\n  searchKey: PropTypes.string,\r\n};\r\n\r\nexport default ShowList;\r\n","import ShowList from \"../Components/ShowList\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst HomePage = function HomePage(props) {\r\n  return <div>{<ShowList searchKey={props.searchKey} />}</div>;\r\n};\r\n\r\nHomePage.propTypes = {\r\n  searchKey: PropTypes.string,\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState } from \"react\";\r\n\r\nexport default function UploadPage(props) {\r\n  const [tripInfo, setTripInfo] = useState({});\r\n  const [errorText, setErrorText] = useState(\"\");\r\n  return (\r\n    <div className=\"col-4\">\r\n      <br />\r\n      <header><h1 className=\"create-info\" style={{fontSize: \"40px\"}}>Create a new Trip</h1></header>\r\n      {!!errorText && (\r\n        <div\r\n          id=\"error\"\r\n          className=\"alert-danger\"\r\n          role=\"alert\"\r\n          style={{ marginBottom: \"4px\" }}\r\n        >\r\n          {errorText}\r\n        </div>\r\n      )}\r\n      <main>\r\n        <form\r\n          id=\"formCreate\"\r\n          onSubmit={async (ev) => {\r\n            ev.preventDefault();\r\n            const formData = new FormData();\r\n            Object.entries(tripInfo).forEach(([key, value]) => {\r\n              formData.append(key, value);\r\n            });\r\n            const response = await fetch(\"/createTrip\", {\r\n              method: \"POST\",\r\n              credentials: \"same-origin\",\r\n              body: formData,\r\n            });\r\n            const res = await response.json();\r\n            if (res && res.success) {\r\n              props.history.push(\"/\");\r\n            } else {\r\n              setErrorText(res.message || \"Upload failed!\");\r\n            }\r\n          }}\r\n        >\r\n          <label className=\"form-label\">\r\n            Title:{\" \"}\r\n            <input\r\n              className=\"form-control\"\r\n              type=\"text\"\r\n              aria-label=\"input title\"\r\n              onChange={(ev) => {\r\n                setTripInfo({\r\n                  ...tripInfo,\r\n                  name: ev.target.value,\r\n                });\r\n              }}\r\n            />\r\n          </label>\r\n          <br />\r\n          <label className=\"form-label\">\r\n            Location:\r\n            <input\r\n              className=\"form-control\"\r\n              type=\"text\"\r\n              aria-label=\"input location\"\r\n              onChange={(ev) => {\r\n                setTripInfo({\r\n                  ...tripInfo,\r\n                  location: ev.target.value,\r\n                });\r\n              }}\r\n            />\r\n          </label>\r\n          <label className=\"form-label\">\r\n            Description:\r\n            <br></br>\r\n            <textarea\r\n              rows=\"5\"\r\n              cols=\"50\"\r\n              aria-label=\"input description\"\r\n              onChange={(ev) => {\r\n                setTripInfo({\r\n                  ...tripInfo,\r\n                  content: ev.target.value,\r\n                });\r\n              }}\r\n            ></textarea>\r\n          </label>\r\n          <label className=\"form-label\">\r\n            Photo:{\" \"}\r\n            <input\r\n              className=\"form-control\"\r\n              type=\"file\"\r\n              id=\"image-upload\"\r\n              aria-label=\"choose photo\"\r\n              onChange={(ev) => {\r\n                setTripInfo({\r\n                  ...tripInfo,\r\n                  image: ev.target.files && ev.target.files[0],\r\n                });\r\n              }}\r\n            />\r\n          </label>\r\n          <br />\r\n          <button type=\"submit\" className=\"btn btn-primary\" aria-label=\"submit\">\r\n            Create\r\n          </button>\r\n        </form>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport \"./../styles/Authen.css\";\r\n\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst LoginPage = function LoginPage(props) {\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [errorText, setErrorText] = useState(\"\");\r\n  return (\r\n    <div className=\"/login\">\r\n      <header className=\"title\">\r\n        <h1 style={{ fontSize: \"40px\" }}>Sign in to upload posts:</h1>\r\n      </header>\r\n\r\n      <main className=\"row\">\r\n        <div className=\"col-sm-4 box border\">\r\n          <form\r\n            id=\"formLogin\"\r\n            onSubmit={async (ev) => {\r\n              ev.preventDefault();\r\n              if (!userInfo.username || !userInfo.password) {\r\n                setErrorText(\"Username and password are required!\");\r\n                return;\r\n              }\r\n              setErrorText(\"\");\r\n              const response = await fetch(\"/login\", {\r\n                method: \"POST\",\r\n                credentials: \"same-origin\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(userInfo),\r\n              });\r\n              const res = await response.json();\r\n\r\n              if (res && res.success) {\r\n                props.onLogin && props.onLogin();\r\n                props.history.push(\"/\");\r\n              } else {\r\n                setErrorText(res.message || \"Sign in failed!\");\r\n              }\r\n            }}\r\n          >\r\n            <div className=\"mb-2\">\r\n              <label htmlFor=\"InputUsername\" className=\"form-label\">\r\n                Username\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                aria-label=\"input Username\"\r\n                onChange={(ev) => {\r\n                  setUserInfo({\r\n                    ...userInfo,\r\n                    username: ev.target.value,\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"InputPassword\" className=\"form-label\">\r\n                Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                aria-label=\"input Password\"\r\n                onChange={(ev) => {\r\n                  setUserInfo({\r\n                    ...userInfo,\r\n                    password: ev.target.value,\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {!!errorText && (\r\n              <div\r\n                id=\"error\"\r\n                className=\"alert-danger\"\r\n                role=\"alert\"\r\n                style={{ marginBottom: \"4px\" }}\r\n              >\r\n                {errorText}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"d-grid gap-2 mx-auto center-font\">\r\n              <button type=\"submit\" className=\"btn btn-primary\" aria-label=\"sign in\">\r\n                Sign In\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <hr />\r\n          <div className=\"center-font\">\r\n            <Link\r\n              className=\"btn btn-success secondfont\"\r\n              to=\"/regist\"\r\n              role=\"button\"\r\n              aria-label=\"creat new account\"\r\n            >\r\n              Creat New Account\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nLoginPage.propTypes = {\r\n  onLogin: PropTypes.func,\r\n};\r\n\r\nexport default withRouter(LoginPage);\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./../styles/Authen.css\";\r\n\r\nexport default function RegistPage(props) {\r\n  const [userInfo, setUserInfo] = useState({});\r\n  const [errorText, setErrorText] = useState(\"\");\r\n  return (\r\n    <div className=\"/regist\">\r\n      <header className=\"title\">\r\n        <h1 style={{ fontSize: \"40px\" }}>Create New Account</h1>\r\n      </header>\r\n      <main className=\"row\">\r\n        <div className=\"col-sm-4 box border\">\r\n          <form\r\n            id=\"formRegist\"\r\n            onSubmit={async (ev) => {\r\n              ev.preventDefault();\r\n              if (!userInfo.username || !userInfo.password) {\r\n                setErrorText(\"Username and password required!\");\r\n                return;\r\n              }\r\n              setErrorText(\"\");\r\n              const response = await fetch(\"/regist\", {\r\n                method: \"POST\",\r\n                credentials: \"same-origin\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(userInfo),\r\n              });\r\n              const res = await response.json();\r\n              if (res && res.success) {\r\n                props.history.push(\"/login\");\r\n              } else {\r\n                setErrorText(res.message || \"Sign up failed!\");\r\n              }\r\n            }}\r\n          >\r\n            <div className=\"mb-2\">\r\n              <label htmlFor=\"InputUsername\" className=\"form-label\">\r\n                Username\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                aria-label=\"input username\"\r\n                onChange={(ev) => {\r\n                  setUserInfo({\r\n                    ...userInfo,\r\n                    username: ev.target.value,\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"InputPassword\" className=\"form-label\">\r\n                Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                aria-label=\"input password\"\r\n                onChange={(ev) => {\r\n                  setUserInfo({\r\n                    ...userInfo,\r\n                    password: ev.target.value,\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n            {!!errorText && (\r\n              <div\r\n                id=\"error\"\r\n                className=\"alert-danger\"\r\n                role=\"alert\"\r\n                style={{ marginBottom: \"4px\" }}\r\n              >\r\n                {errorText}\r\n              </div>\r\n            )}\r\n            <div className=\"d-grid gap-2 mx-auto center-font\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-success\"\r\n                aria-label=\"sign up\"\r\n              >\r\n                Sign Up\r\n              </button>\r\n            </div>\r\n          </form>\r\n          <hr />\r\n          <div className=\"center-font\">\r\n            <p className=\"secondfont\">Already have an account?</p>\r\n            <Link\r\n              className=\"btn btn-primary secondfont\"\r\n              to=\"/login\"\r\n              role=\"button\"\r\n              aria-label=\"sign in\"\r\n            >\r\n              Sign In\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst SearchComponent = function SearchComponent(props) {\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n\r\n  return (\r\n    <form className=\"d-flex\" role =\"search\">\r\n      <input\r\n        className=\"form-control me-2\"\r\n        type=\"search\"\r\n        placeholder=\"Search\"\r\n        aria-label=\"Search Content\"\r\n        onChange={(ev) => {\r\n          setSearchKey(ev.target.value);\r\n        }}\r\n      />\r\n      <button\r\n        className=\"btn btn-outline-light\"\r\n        aria-label=\"Search\"\r\n        onClick={(ev) => {\r\n          ev.preventDefault();\r\n          props.onSearch && props.onSearch(searchKey);\r\n        }}\r\n      >\r\n        Search\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nSearchComponent.propTypes = {\r\n  onSearch: PropTypes.func,\r\n};\r\n\r\nexport default withRouter(SearchComponent);\r\n","import React from \"react\";\r\nimport { Link, useLocation, withRouter } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport SearchComponent from \"../Components/SearchComponent\";\r\n\r\nconst Nav = function NavigationComponent(props) {\r\n  const location = useLocation();\r\n  console.log(\"Render NavigationComponent\", location);\r\n\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n      <div className=\"container-fluid\">\r\n        <Link\r\n          className=\"navbar-brand\"\r\n          aria-label=\"Homepage\"\r\n          to=\"/\"\r\n          onClick={async (ev) => {\r\n            ev.preventDefault();\r\n            props.onSearch(\"\");\r\n            props.history.push(\"/\");\r\n          }}\r\n        >\r\n          Bay Area Trip Guide\r\n        </Link>\r\n        <div>\r\n          <button\r\n            className=\"navbar-toggler\"\r\n            type=\"button\"\r\n            data-bs-toggle=\"collapse\"\r\n            data-bs-target=\"#navbarSupportedContent\"\r\n            aria-controls=\"navbarSupportedContent\"\r\n            aria-expanded=\"false\"\r\n            aria-label=\"Toggle navigation\"\r\n          >\r\n            <span className=\"navbar-toggler-icon\"></span>\r\n          </button>\r\n        </div>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n            <li className=\"nav-item\">\r\n              <Link\r\n                className={\r\n                  \"nav-link\" + (location.pathname === \"/\" ? \" active\" : \"\")\r\n                }\r\n                aria-label=\"View trips\"\r\n                aria-current=\"page\"\r\n                onClick={async (ev) => {\r\n                  ev.preventDefault();\r\n                  props.onSearch(\"\");\r\n                  props.history.push(\"/\");\r\n                }}\r\n                to=\"/list\"\r\n              >\r\n                View Trips\r\n              </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n              <Link\r\n                className={\r\n                  \"nav-link\" +\r\n                  (location.pathname === \"/upload\" ? \" active\" : \"\")\r\n                }\r\n                aria-label=\"Upload\"\r\n                aria-current=\"page\"\r\n                to=\"/upload\"\r\n              >\r\n                Upload\r\n              </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n              <Link\r\n                className=\"nav-link\"\r\n                to=\"/saved\"\r\n                aria-label=\"My Favourite\"\r\n                aria-current=\"page\"\r\n              >\r\n                My Favourite\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n\r\n          <div>\r\n            <SearchComponent onSearch={props.onSearch} />\r\n          </div>\r\n\r\n          <div>\r\n            <button\r\n              className=\"btn btn-success\"\r\n              type=\"submit\"\r\n              style={{ marginLeft: \"30px\" }}\r\n              aria-label=\"Sign In/ Logout\"\r\n              onClick={async (ev) => {\r\n                ev.preventDefault();\r\n                const { hasLogin, onLogout } = props;\r\n                if (hasLogin) {\r\n                  onLogout && onLogout();\r\n                } else {\r\n                  props.history.replace(\"/login\");\r\n                }\r\n              }}\r\n            >\r\n              {props.hasLogin ? \"Logout\" : \"Sign In\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nNav.propTypes = {\r\n  hasLogin: PropTypes.bool,\r\n  onLogout: PropTypes.func,\r\n};\r\n\r\nexport default withRouter(Nav);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport ShowSaved from \"./Components/ShowSaved\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nimport HomePage from \"./Pages/HomePage.js\";\r\nimport UploadPage from \"./Pages/UploadPage.js\";\r\nimport LoginPage from \"./Pages/LoginPage.js\";\r\nimport RegistPage from \"./Pages/RegistPage.js\";\r\nimport NavigationComponent from \"./Components/NavigationComponent.js\";\r\n\r\nfunction App() {\r\n  const [hasLogin, setLogin] = useState(false);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  useEffect(() => {\r\n    const checkLogin = async () => {\r\n      const response = await fetch(\"/checkSession\");\r\n      const res = await response.json();\r\n\r\n      if (res && res.success) {\r\n        setLogin(true);\r\n      } else {\r\n        setLogin(false);\r\n      }\r\n    };\r\n    checkLogin();\r\n  }, []);\r\n  return (\r\n    <Router>\r\n      <NavigationComponent\r\n        hasLogin={hasLogin}\r\n        onLogout={async () => {\r\n          const response = await fetch(\"/logout\");\r\n          const res = await response.json();\r\n\r\n          if (res && res.success) {\r\n            setLogin(false);\r\n          }\r\n        }}\r\n        onSearch={(key) => {\r\n          setSearchKey(key);\r\n        }}\r\n      ></NavigationComponent>\r\n      <div className=\"container\">\r\n        <Switch>\r\n          <Route path=\"/login\">\r\n            <LoginPage\r\n              onLogin={() => {\r\n                setLogin(true);\r\n              }}\r\n            />\r\n          </Route>\r\n          <Route path=\"/regist\" component={RegistPage} />\r\n          <Route path=\"/upload\" component={UploadPage} />\r\n          <Route path=\"/saved\" component={ShowSaved} />\r\n          <Route path=\"/\">\r\n            <HomePage searchKey={searchKey} />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport \"./styles/styles.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}